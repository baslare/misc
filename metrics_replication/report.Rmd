---
title: "Report"
author: "Efe Baslar, Ling Ki Wong"
date: '2022-02-26'
output:
  pdf_document: default
  html_document:
    df_print: paged
---

# There's a heading!
let us test the pdf knit

text here
text here
text here
text here
```{r setup, include=FALSE}

require(reticulate)
knitr::opts_chunk$set(echo = FALSE)
knitr::opts_chunk$set(engine.path = list(
python = 'C:/Users/Efe/anaconda3/python.exe'))
use_condaenv(condaenv = "anaconda3")

```


```{python,message = FALSE, echo = FALSE, warning=FALSE}

import os
import pandas as pd
import pickle

with open("table_1.pickle","rb") as a:
    table_1 = pickle.load(a)

```



# Table 1

text here
```{r,results="asis",message = FALSE, echo = FALSE, warning=FALSE,fig.cap="Summary Statistics"}
require(tidyverse)
require(stargazer)
require(kableExtra)

table_1_df <- py$table_1
table_1_df <- apply(table_1_df,MARGIN = 2, unname)
rownames(table_1_df) <- c("Filing year","Publication year","# yrs. in patent protection after 1956","Total Cites","Citations by others","Self-citatons","Cts. by others b. 1949")
colnames(table_1_df) <- paste0("(",colnames(table_1_df) %>% str_remove_all("[.]+"),")")

kableExtra::kable(table_1_df %>% format(round(., 1), digits=1,scientific=FALSE),format="latex",booktabs=T)%>% add_header_above(c(" "," ","All","Tele","others"," ","All","Tele","Others")) %>% add_header_above(c(" ","All(40-55)","Baseline (40-48)"=3, "All(40-55)","Baseline (40-48)"=3)) %>% add_header_above(c(" ","Non-Bell System patents"=4,"Bell System patents"=4)) %>% kable_styling(font_size = 7)
```
# Table 2

text here
```{r table2,results="asis",message = FALSE, echo = FALSE, warning=FALSE}
txt <- read_file("table_2_latex.txt")

txt <- txt %>% str_replace("\\\\centering\\\r\\\n ","\\\\centering\\\r\\\n \\\\scriptsize\\\r\\\n ")
writeLines(txt)

```
# Table 3

text here
```{r,results="asis",message = FALSE, echo = FALSE, warning=FALSE}
txt2 <- read_file("table_3_latex.txt")

txt2 <- txt2 %>% str_replace("\\\\centering\\\r\\\n ","\\\\centering\\\r\\\n \\\\scriptsize\\\r\\\n ")
writeLines(txt2)
```
# Table 4

text here
```{r,results="asis",message = FALSE, echo = FALSE, warning=FALSE}
source("watzinger_etal_table4.R")
```




